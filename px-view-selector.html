<link rel="import" href="../polymer/polymer.html"/>


<!--
Element providing solution to no problem in particular. As a simple, increments a counter when clicked.

##### Usage

    <px-view-selector counter-value="1">Hi</px-view-selector>

@element px-view-selector
@blurb Element providing solution to no problem in particular.
@homepage index.html
@demo demo.html
-->
<dom-module id="px-view-selector">
    <link rel="import" type="css" href="css/px-view-selector.css"/>
    <template>
        <div class="dropdown-text" on-click="toggleDropdown">
            <span>{{dropdownName}}</span>
            <i class="fa fa-caret-down"></i>
        </div>
        <ul id="dropdown" class="dropdown-menu list-bare" hidden>
            <template is="dom-repeat" items="{{views}}" as="view">
                <li on-click="selectView">
                    <div>{{view.name}}</div>
                </li>
            </template>
        </ul>            
    </template>
</dom-module>

<script>
    Polymer({

        is: 'px-view-selector',

        properties: {
            views: {
                type: Array,
                observer: 'changeDropdownName'
            },
            selecteddeckurl: {
                type: String,
                notify: true,
                reflectToAttribute: true
            }
        },

        changeDropdownName: function() {
            var dropdownName = '';

            if(this.views && this.views.length > 0) { // if no selected view set, use the first view
                dropdownName = this.views[0].name;
            }
            
            this.set('dropdownName', dropdownName);
        },

        toggleDropdown: function() {
            this.$.dropdown.hidden = !this.$.dropdown.hidden;
        },
        selectView: function(e) {
            this.set('dropdownName', e.model.view.name);
            this.set('selecteddeckurl', e.model.view.url);
            this.$.dropdown.hidden = true;
        }

    });
</script>
